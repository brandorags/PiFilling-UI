<div class="folder-path">
  <span *ngFor="let folder of folderPath.pathArray; index as folderIndex; first as isFirst; last as isLast">
      <span *ngIf="isFirst && folderPath.pathArray.length === 1; else multipleFolderLogic">
        <mat-icon>home</mat-icon> {{folder}}
      </span>
      <ng-template #multipleFolderLogic>
        <span *ngIf="isFirst">
          <button mat-button (click)="navigateToFolder(folderIndex)">
            <mat-icon>home</mat-icon> {{folder}}
          </button> <mat-icon>keyboard_arrow_right</mat-icon>
        </span>
        <span *ngIf="!isFirst && !isLast">
          <button (click)="navigateToFolder(folderIndex)">
            <mat-icon>folder</mat-icon> {{folder}}
          </button> <mat-icon>keyboard_arrow_right</mat-icon>
        </span>
        <span *ngIf="isLast">
          <mat-icon>folder</mat-icon> {{folder}}
        </span>
      </ng-template>
  </span>
</div>

<div class="file-card-container" (drop)="queueUpload($event.dataTransfer.files)">
  <mat-grid-list cols="{{(isHandset$ | async) ? 1 : 3}}" rowHeight="375px">
    <mat-grid-tile *ngFor="let file of files">
      <mat-card *ngIf="!file.isDirectory; else directoryCard" class="file-card" tabindex="0">
        <span *ngIf="file.isImageFile(); else nonImageFileCard">
          <img mat-card-image src="{{fileStorageBaseUrl}}{{folderPath}}/{{file.filename}}" alt="{{file.filename}}">
        </span>
        <ng-template #nonImageFileCard>
          <mat-icon>insert_drive_file</mat-icon>          
        </ng-template>
        <mat-card-content>
          {{file.filename}}
        </mat-card-content>
      </mat-card>
      <ng-template #directoryCard>
        <mat-card class="file-card" (dblclick)="navigateToSubfolder(file.filename)" tabindex="0">
          <mat-icon>folder</mat-icon>
          <mat-card-content>
            {{file.filename}}
          </mat-card-content>
        </mat-card>
      </ng-template>
    </mat-grid-tile>
  </mat-grid-list>
</div>

<div *ngIf="queuedFiles.length > 0">
  <div class="queued-file-list-header">
    <span *ngIf="queuedFilesRemaining > 0; else uploadsComplete" class="queued-file-list-header-title">
      Uploads ({{queuedFilesRemaining}} Remaining)
    </span>
    <ng-template #uploadsComplete>
      <span class="queued-file-list-header-title">Uploads (Done!)</span>
    </ng-template>
    <mat-icon class="queued-file-list-header-close" (click)="clearQueuedFiles()">close</mat-icon>
  </div>
  <div class="queued-file-list-body">
    <mat-card *ngFor="let queuedFile of queuedFiles">
      <mat-card-content>
        {{queuedFile.filename}}
        <mat-progress-bar [value]="queuedFile.uploadProgress"></mat-progress-bar>
      </mat-card-content>
    </mat-card>
  </div>  
</div>